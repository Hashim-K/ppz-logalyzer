# PPZ-Logalyzer Environment Configuration
# Optimized for Ubuntu 24.04.2 LTS VPS deployment with Plesk

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_PASSWORD=your_secure_database_password_here
POSTGRES_DB=ppz_logalyzer
POSTGRES_USER=ppz_user

# =============================================================================
# APPLICATION CONFIGURATION  
# =============================================================================
NODE_ENV=production
RUST_LOG=info

# API URLs for frontend (adjust these for your domain)
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000

# Security
JWT_SECRET=your_jwt_secret_key_minimum_32_characters_here

# File Processing Limits
MAX_FILE_SIZE=104857600  # 100MB - adjust based on your VPS resources
UPLOAD_TIMEOUT=300       # 5 minutes

# =============================================================================
# MONITORING CONFIGURATION (optional)
# =============================================================================
PROMETHEUS_ENABLED=true
GRAFANA_PASSWORD=your_grafana_admin_password_here

# =============================================================================
# VPS RESOURCE LIMITS
# These are optimized for a typical VPS - adjust based on your server specs
# =============================================================================

# Database resources
DB_MAX_CONNECTIONS=20
DB_SHARED_BUFFERS=128MB

# Backend resources  
RUST_MAX_THREADS=4
RUST_STACK_SIZE=2097152  # 2MB

# Redis configuration
REDIS_MAXMEMORY=128mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# =============================================================================
# PLESK INTEGRATION NOTES
# =============================================================================
# 1. Use Plesk's Docker proxy rules to route traffic:
#    - Frontend: Route port 3000 to your domain
#    - Backend API: Route port 8000 to api.yourdomain.com (optional)
#
# 2. SSL/TLS: Let Plesk handle SSL certificates via Let's Encrypt
#
# 3. Domain configuration:
#    - Main site: yourdomain.com -> container:3000
#    - API endpoint: api.yourdomain.com -> container:8000
#
# 4. Update NEXT_PUBLIC_API_URL above to match your domain setup
#
# =============================================================================

# =============================================================================
# BACKUP AND MAINTENANCE
# =============================================================================
# Database backup retention (days)
BACKUP_RETENTION_DAYS=30

# Log retention (days)  
LOG_RETENTION_DAYS=7

# Cache cleanup interval (hours)
CACHE_CLEANUP_INTERVAL=24
